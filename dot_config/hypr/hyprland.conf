# defaults
source = ~/.local/share/omarchy/default/hypr/autostart.conf
source = ~/.local/share/omarchy/default/hypr/bindings/media.conf
source = ~/.local/share/omarchy/default/hypr/bindings/clipboard.conf
source = ~/.local/share/omarchy/default/hypr/bindings/tiling-v2.conf
source = ~/.local/share/omarchy/default/hypr/bindings/utilities.conf
source = ~/.local/share/omarchy/default/hypr/envs.conf
source = ~/.local/share/omarchy/default/hypr/looknfeel.conf
source = ~/.local/share/omarchy/default/hypr/input.conf

# remove unnecessary binds
unbind = SUPER SHIFT, BACKSPACE
unbind = SUPER SHIFT CTRL, SPACE
unbind = SUPER CTRL, SPACE
unbind = SUPER, COMMA
unbind = SUPER SHIFT, COMMA
unbind = SUPER CTRL, COMMA
unbind = SUPER ALT, COMMA
unbind = SUPER CTRL, I
unbind = SUPER CTRL, N
unbind = , PRINT
unbind = SHIFT, PRINT
unbind = ALT, PRINT
unbind = SUPER, PRINT
unbind = SUPER CTRL, T
unbind = SUPER CTRL, B
unbind = SUPER, SPACE
unbind = SUPER ALT, SPACE
unbind = SUPER SHIFT, SPACE

# ---to-install---
# install hyprquickshot
# install Stack Sans Text
# install uosc
# install matugen
# install chezmoi
# install screengrab
# install vicinae
# install qdiskinfo
# install mangohud
# ---set-cursor---
# $ yay -S apple_cursor
# $ hyprctl setcursor 'macOS (SVG)' 24
# $ gsettings set org.gnome.desktop.interface cursor-theme macOS
# ---gaming---
# for Counter-Strike Classic Offensive: ProtonUp-Qt and lib32-vulkan-radeon
# for Xbox Controller: install https://github.com/dlundqvist/xone and create 50-xone.rules in /etc/udev/rules.d/ and add `ACTION=="add", SUBSYSTEM=="leds", KERNEL=="gip*", ATTR{brightness}="0"`
# for Heroic Games Launcher: add MANGOHUD = 1 to ENV for every game where it's needed
# ---davinci-resolve---
# required opencl-amd
# LD_PRELOAD="/usr/lib/libgio-2.0.so /usr/lib/libgmodule-2.0.so /usr/lib/libglib-2.0.so" /opt/resolve/bin/resolve
# ---other---
# for printer: https://archive.org/download/Windows7-iso
# cleaning up the packet manager cache: $ pacman -Scc and remove .cache/yay
# $ xdg-settings set default-web-browser helium.desktop'
# $ xdg-mime default spotify.desktop x-scheme-handler/spotify
# $ hyprshade on e-ink

source = colors.conf

# autostart
exec-once = sleep 3 && AmneziaVPN
exec-once = sleep 3 && pkill swaybg
exec-once = sleep 3 && awww-daemon
exec-once = sleep 3 && vicinae server
exec-once = [workspace 2 silent] kitty atop
exec-once = [workspace 2 silent] sleep 2; kitty nvtop

# keyboard and mouse
input {
    kb_layout = us,ru
    kb_options = grp:alt_shift_toggle
    repeat_rate = 40
    repeat_delay = 600
    numlock_by_default = true
    accel_profile = flat
    sensitivity = 0.55
    touchpad {
        scroll_factor = 0.4
  }
}
windowrule {
  name = windowrule-1
  scroll_touchpad = 1.5
  match:class = (Alacritty|kitty)
}

windowrule {
  name = windowrule-2
  scroll_touchpad = 0.2
  match:class = com.mitchellh.ghostty
}

# monitors
env = GDK_SCALE, 1
monitor = DP-2, 2560x1440@165, 1080x0, 1
monitor = HDMI-A-1, disable

# window rules
windowrule {    # full opacity when focused
  name = windowrule-3
  opacity = 1.0 override
  match:focus = 1
}

windowrule {    # fix steam windows
  name = windowrule-4
  tile = on
  match:title = ^(Steam)$
}

windowrule {
  name = windowrule-5
  opacity = 1.0 override 1.0 override
  match:class = ^(helium)$
}

windowrule {    # fix monitor sleep in-game
  name = windowrule-6
  idle_inhibit = fullscreen
  match:class = .*
}

windowrule {
  name = windowrule-7
  rounding = 10
  match:class = awww-daemon
}

windowrule {
  name = windowrule-8
  opacity = 1.0 override 1.0 override
  match:class = ^(com.obsproject.Studio)$
}

windowrule {
  name = windowrule-9
  opacity = 1.0 override 1.0 override
  match:class = ^(kitty)$
}

layerrule {
  name = layerrule-1
  blur = on
  ignore_alpha = 0
  match:namespace = walker
}

# applications
$terminal = ghostty
$fileManager = nautilus
$browser = helium-browser
$rofi = pkill rofi || rofi -show drun -theme $HOME/.config/rofi/style.rasi
$menu = vicinae toggle
$wall = $HOME/.config/hypr/scripts/wallSelect.sh

# scripts
bindd = SUPER SHIFT, SPACE, Toggle Waybar, exec, omarchy-toggle-waybar
bindd = SUPER SHIFT, J, Toggle Second Monitor, exec, ~/.config/hypr/scripts/monitor.sh
bindd = SUPER CONTROL, Z, Start/Save Recording, exec, ~/.config/hypr/scripts/record_save.sh
bindd = SUPER CONTROL, X, Stop Recording, exec, ~/.config/hypr/scripts/record_stop.sh
bindd = SUPER ALT, SPACE, Omarchy Menu, exec, ~/.config/hypr/scripts/omarchy_menu

# binds
bindd = SUPER, RETURN, Terminal, exec, $terminal
bindd = SUPER, SPACE, rofi, exec, $menu
bindd = SUPER CONTROL, SPACE, Wallpaper Selector, exec, $wall
bindd = SUPER, E, File Manager, exec, $fileManager --new-window
bindd = SUPER, B, Browser, exec, $browser
bindd = , Home, Screenshot, exec, HQS_DIR=$HOME/Screenshots quickshell -c hyprquickshot -n
bindd = , page_down, Fullscreen Screenshot, exec, screengrab -f -n
bindd = ALT, Home, Color Picker, exec, pkill hyprpicker || hyprpicker -a
bindd = SUPER, P, Toggle Window Floating, togglefloating

# environment variables
env = HYPRCURSOR_THEME,macOS
env = HYPRCURSOR_SIZE,24
env = XCURSOR_THEME,macOS
env = XCURSOR_SIZE,24

# theme
general {
    gaps_in = 0
    gaps_out = 0
    border_size = 2
    col.active_border = rgb(b6b4b6)
    col.inactive_border = rgb(000000)
    resize_on_border = true
    extend_border_grab_area = 15
    allow_tearing = false
    layout = dwindle
}

animations {
    enabled = yes
    bezier = snappy, 0.25, 0.46, 0.45, 0.94
    bezier = smooth, 0.23, 1, 0.32, 1
    bezier = slide, 0.165, 0.84, 0.44, 1
    bezier = overshot, 0.13, 0.99, 0.29, 1.1

    animation = windows, 1, 4, snappy, slide
    animation = windowsIn, 1, 4, overshot, popin 85%
    animation = windowsOut, 1, 3, snappy, popin 85%
    animation = windowsMove, 1, 4, snappy
    animation = fade, 1, 5, smooth
    animation = fadeIn, 1, 4, smooth
    animation = fadeOut, 1, 3, smooth
    animation = workspaces, 1, 3, smooth, slidefade 20%
    animation = border, 1, 5, default
    animation = borderangle, 1, 8, default
    animation = layersIn, 1, 3, smooth, popin 85%
    animation = layersOut, 1, 2, snappy, popin 85%
    animation = specialWorkspace, 1, 3, overshot, slidefade 15%
}

decoration {
    blur {
        enabled = true
        size = 6
        passes = 3
        contrast = 1.5
        brightness = 0.8
        vibrancy = 0.2
        vibrancy_darkness = 0.2
        noise = 0
        ignore_opacity = true
        new_optimizations = on
    }
    active_opacity = 1
    inactive_opacity = 1.0
    fullscreen_opacity = 1.0
}

gestures {
    gesture = 3, left, dispatcher, workspace, -1
    gesture = 3, right, dispatcher, workspace, +1
}

misc {
   background_color = $background
}
